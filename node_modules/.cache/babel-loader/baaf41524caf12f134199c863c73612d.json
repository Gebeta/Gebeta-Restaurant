{"remainingRequest":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/babel-loader/lib/index.js!/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/hayyuu/Gebeta/Gebeta-Restaurant/src/views/Orders.vue?vue&type=template&id=4b6b7b1f","dependencies":[{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/src/views/Orders.vue","mtime":1630218053242},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628298225000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jayB9IGZyb20gInZ1ZSI7CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfSGVhZGVyID0gX3Jlc29sdmVDb21wb25lbnQoIkhlYWRlciIpOwoKICB2YXIgX2NvbXBvbmVudF9CdXR0b24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiQnV0dG9uIik7CgogIHZhciBfY29tcG9uZW50X29yZGVyX2xpc3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgib3JkZXItbGlzdCIpOwoKICB2YXIgX2NvbXBvbmVudF9Ob3RpZmljYXRpb25MaXN0ID0gX3Jlc29sdmVDb21wb25lbnQoIk5vdGlmaWNhdGlvbkxpc3QiKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9IZWFkZXIsIHsKICAgIHRpdGxlOiAiUmVzdGF1cmFudCBPcmRlciBMaXN0IgogIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9CdXR0b24sIHsKICAgIHRleHQ6ICdBY3RpdmUgb3JkZXJzJywKICAgIGNvbG9yOiAnIzRjNDIzZicsCiAgICBzdHlsZTogewogICAgICAicGFkZGluZyI6ICI1cHggMjBweCIsCiAgICAgICJtYXJnaW4tYm90dG9tIjogIjE1cHgiCiAgICB9CiAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X29yZGVyX2xpc3QsIHsKICAgIG9yZGVyczogJGRhdGEub3JkZXJzLAogICAgb25Ub2dnbGVBY2NlcHQ6ICRvcHRpb25zLnRvZ2dsZUEKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib3JkZXJzIiwgIm9uVG9nZ2xlQWNjZXB0Il0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9Ob3RpZmljYXRpb25MaXN0LCB7CiAgICBub3RpZmljYXRpb25zOiAkZGF0YS5ub3RpZmljYXRpb25zLAogICAgb25SZW1vdmVOb3RpZmljYXRpb246ICRvcHRpb25zLnJlbW92ZU5vdGlmaWNhdGlvbgogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJub3RpZmljYXRpb25zIiwgIm9uUmVtb3ZlTm90aWZpY2F0aW9uIl0pXSwgNjQKICAvKiBTVEFCTEVfRlJBR01FTlQgKi8KICApOwp9"},{"version":3,"sources":["/home/hayyuu/Gebeta/Gebeta-Restaurant/src/views/Orders.vue"],"names":[],"mappings":";;;;;;;;;;6DACI,YAAA,CAAwC,iBAAxC,EAAwC;AAAhC,IAAA,KAAK,EAAC;AAA0B,GAAxC,C,EACA,YAAA,CAAsG,iBAAtG,EAAsG;AAA7F,IAAA,IAAI,EAAE,eAAuF;AAAnE,IAAA,KAAK,EAAE,SAA4D;AAAhD,IAAA,KAA8C,EAA9C;AAAA,iBAAA,UAAA;AAAA,uBAAA;AAAA;AAAgD,GAAtG,C,EACA,YAAA,CAAuD,qBAAvD,EAAuD;AAA1C,IAAA,MAAM,EAAE,KAAA,CAAA,MAAkC;AAAzB,IAAA,cAAa,EAAE,QAAA,CAAA;AAAU,GAAvD,E,IAAA,E;;AAAA,I,4BAAA,C,EACA,YAAA,CAC+C,2BAD/C,EAC+C;AAD5B,IAAA,aAAa,EAAE,KAAA,CAAA,aACa;AAA1C,IAAA,oBAAmB,EAAE,QAAA,CAAA;AAAqB,GAD/C,E,IAAA,E;;AAAA,I,yCAAA,C","sourcesContent":["<template>\n    <Header title=\"Restaurant Order List\" />\n    <Button :text=\" 'Active orders' \" :color=\"'#4c423f' \" style=\"padding: 5px 20px; margin-bottom: 15px\"/>\n    <order-list :orders=\"orders\" @toggle-accept=\"toggleA\"/>\n    <NotificationList :notifications=\"notifications\" \n        @remove-notification=\"removeNotification\"/>\n</template>\n\n<script>\nimport Header from '../components/Header'\nimport Button from '../components/Button'\nimport OrderList from '../components/OrderList'\nimport NotificationList from '../components/NotificationList'\n\nexport default {\n    name: 'Orders',\n    components:{\n        Header,\n        Button,\n        OrderList,\n        NotificationList\n    },\n    data(){\n        return{\n            orders: [],\n            notifications: []\n        }\n    },\n    methods:{\n        async fetchOrders(){\n            const res = await fetch('api/order',{headers: this.getHeader()})\n            const data = await res.json()\n            return data\n        },\n        async fetchOrder(id){\n            const res = await fetch(`api/order/${id}`,{headers: this.getHeader()})\n            const data = await res.json()\n            return data\n        },\n        async toggleA(id){\n            const orderToToggle = await this.fetchOrder(id)\n            const updOrder = {...orderToToggle, isAcitive: !orderToToggle.isAcitive}\n\n            const res = await fetch(`api/order/${id}`,{\n                method: 'PUT',\n                headers: this.getHeader(),\n                body: JSON.stringify(updOrder)\n            })\n\n            const data = await res.json()\n            if(data && data.isAcitive){this.addNotification({id: data._id,message: data._id + ' Accepted', type: 'success'})}\n            this.orders = this.orders.map((order)  => order._id === id ? {...order, isAcitive: data.isAcitive} : order)\n        },\n        getHeader(){\n            const token = JSON.parse(localStorage.getItem('token'))\n            return {'Content-type': 'application/json', 'Authorization': ' Bearer ' + token}\n        },\n        addNotification(notif){\n            this.notifications.push(notif)\n        },\n        removeNotification(id){\n            this.notifications = this.notifications.filter((notif) => notif.id !== id)\n        }\n\n    },\n    async created(){\n        this.orders = await this.fetchOrders()\n    }\n}\n</script>"],"sourceRoot":""}]}