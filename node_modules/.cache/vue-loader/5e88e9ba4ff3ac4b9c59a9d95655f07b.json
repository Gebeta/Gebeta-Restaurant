{"remainingRequest":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/hayyuu/Gebeta/Gebeta-Restaurant/src/views/Orders.vue?vue&type=template&id=4b6b7b1f","dependencies":[{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/src/views/Orders.vue","mtime":1630218053242},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628298225000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hayyuu/Gebeta/Gebeta-Restaurant/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICA8SGVhZGVyIHRpdGxlPSJSZXN0YXVyYW50IE9yZGVyIExpc3QiIC8+CiAgICA8QnV0dG9uIDp0ZXh0PSIgJ0FjdGl2ZSBvcmRlcnMnICIgOmNvbG9yPSInIzRjNDIzZicgIiBzdHlsZT0icGFkZGluZzogNXB4IDIwcHg7IG1hcmdpbi1ib3R0b206IDE1cHgiLz4KICAgIDxvcmRlci1saXN0IDpvcmRlcnM9Im9yZGVycyIgQHRvZ2dsZS1hY2NlcHQ9InRvZ2dsZUEiLz4KICAgIDxOb3RpZmljYXRpb25MaXN0IDpub3RpZmljYXRpb25zPSJub3RpZmljYXRpb25zIiAKICAgICAgICBAcmVtb3ZlLW5vdGlmaWNhdGlvbj0icmVtb3ZlTm90aWZpY2F0aW9uIi8+Cg=="},{"version":3,"sources":["/home/hayyuu/Gebeta/Gebeta-Restaurant/src/views/Orders.vue"],"names":[],"mappings":";IACI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACvC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/hayyuu/Gebeta/Gebeta-Restaurant/src/views/Orders.vue","sourceRoot":"","sourcesContent":["<template>\n    <Header title=\"Restaurant Order List\" />\n    <Button :text=\" 'Active orders' \" :color=\"'#4c423f' \" style=\"padding: 5px 20px; margin-bottom: 15px\"/>\n    <order-list :orders=\"orders\" @toggle-accept=\"toggleA\"/>\n    <NotificationList :notifications=\"notifications\" \n        @remove-notification=\"removeNotification\"/>\n</template>\n\n<script>\nimport Header from '../components/Header'\nimport Button from '../components/Button'\nimport OrderList from '../components/OrderList'\nimport NotificationList from '../components/NotificationList'\n\nexport default {\n    name: 'Orders',\n    components:{\n        Header,\n        Button,\n        OrderList,\n        NotificationList\n    },\n    data(){\n        return{\n            orders: [],\n            notifications: []\n        }\n    },\n    methods:{\n        async fetchOrders(){\n            const res = await fetch('api/order',{headers: this.getHeader()})\n            const data = await res.json()\n            return data\n        },\n        async fetchOrder(id){\n            const res = await fetch(`api/order/${id}`,{headers: this.getHeader()})\n            const data = await res.json()\n            return data\n        },\n        async toggleA(id){\n            const orderToToggle = await this.fetchOrder(id)\n            const updOrder = {...orderToToggle, isAcitive: !orderToToggle.isAcitive}\n\n            const res = await fetch(`api/order/${id}`,{\n                method: 'PUT',\n                headers: this.getHeader(),\n                body: JSON.stringify(updOrder)\n            })\n\n            const data = await res.json()\n            if(data && data.isAcitive){this.addNotification({id: data._id,message: data._id + ' Accepted', type: 'success'})}\n            this.orders = this.orders.map((order)  => order._id === id ? {...order, isAcitive: data.isAcitive} : order)\n        },\n        getHeader(){\n            const token = JSON.parse(localStorage.getItem('token'))\n            return {'Content-type': 'application/json', 'Authorization': ' Bearer ' + token}\n        },\n        addNotification(notif){\n            this.notifications.push(notif)\n        },\n        removeNotification(id){\n            this.notifications = this.notifications.filter((notif) => notif.id !== id)\n        }\n\n    },\n    async created(){\n        this.orders = await this.fetchOrders()\n    }\n}\n</script>"]}]}